# Helm Chart for CVE Consumer Application

This Helm chart deploys the `cve-consumer` application, which consumes messages from a Kafka topic and processes them into postgresql, along with an init container that runs migration scripts for our database.

## Prerequisites

- Kubernetes 1.12+
- Helm 3.0+
- A Kafka cluster
- A PostgreSQL database

## Installing the Chart

To install the chart with the release name `cve-consumer`:

```sh
helm install cve-consumer . --namespace cve-consumer --create-namespace
```

This command deploys the `cve-consumer` application on the Kubernetes cluster in the `cve-consumer` namespace.

## Uninstalling the Chart

To uninstall/delete the `cve-consumer` deployment:

```sh
helm uninstall cve-consumer --namespace cve-consumer
```

## Environment Variables

The following environment variables are used in the `cve-consumer` application:

- `KAFKA_TOPIC`: The Kafka topic to consume messages from
- `KAFKA_BROKERS`: A comma-separated list of Kafka brokers
- `KAFKA_GROUP_ID`: The Kafka consumer group ID
- `DB_USERNAME`: Database username
- `DB_PASSWORD`: Database password
- `DB_NAME`: Database name
- `DB_PORT`: Database port
- `APP_PORT`: Application port
- `DB_HOST`: Database host
- `KAFKA_USERNAME`: Kafka username
- `KAFKA_PASSWORD`: Kafka password

## Init Container

The init container runs migration scripts for the database before the main application container starts. This ensures that the database schema is up to date and ready for the application to use.

## Liveness and Readiness Probes

Liveness and readiness probes are configured to ensure that the application is running and healthy. These probes can be configured in the `values.yaml` file.

## Resource Requests and Limits

Resource requests and limits are defined to ensure that the application has enough resources to run efficiently. These can be configured in the `values.yaml` file.

### check values.yaml and change secrets values as desired
